---
sidebar_position: 1
---

# 快速入门指南

你好，欢迎！

在这份简短的文档中，我们将介绍 Arrow 的基础知识，帮助你快速轻松地入门。

> 如需了解更多高级主题和技术信息，请阅读本文档的其他页面。

## 新建项目

每次打开编辑器时，Arrow 都会以一个未保存的几乎空白的文档欢迎你。

要创建新项目，你只需保存该未命名文档，方法是点击标题栏上的 `保存` 按钮，或通过 `检查器面板 > 项目选项卡 > 新建菜单按钮 > 保存当前并继续`。

> 常用[键盘快捷键](./shortcuts) `Ctrl + S` 也可以使用。

系统会要求你输入标题和文件名。所有新文件都将在[工作目录](#项目文件位置)中创建。

> 要从文件系统导入和列出项目，请使用：
> `检查器面板 > 项目选项卡 > 新建菜单按钮 > 导入项目文件`。

## 项目文件位置 {#项目文件位置}

Arrow 将项目的所有章节/文档保存在一个工作目录中，作为独立的工作空间。

此目录默认为 `user://`，指向特定于平台的用户本地应用数据目录。

你可以从[偏好设置](#偏好设置)面板更改工作目录的路径。

> 更改工作目录不会移动你的项目文件，
> 如果你在更改工作目录路径后保存打开的项目，
> 它将被视为该新工作空间的新项目。

章节文档保存为带有 `.arrow` 扩展名的 JSON 文件。

> 与针对生产环境的 `.html` 和 `.json`（精简版）导出相比，
> `.arrow` 保存文件包含编辑器的所有元数据和开发者的*节点注释*，
> 因此更适合备份、跟踪和在开发中重新导入项目。

## 偏好设置 {#偏好设置}

可以从*偏好设置*面板进行编辑器配置。

> 要访问它，请点击编辑器左上角的 `Arrow` 菜单按钮，然后选择 `Preferences`（偏好设置）。

这些配置将持久保存在 `.arrow.config` 文件中。

还有一些临时的**快速偏好设置**，用于控制便捷功能，
如*自动节点更新*和*连接辅助*（两者默认都是激活状态）。
你可以在编辑器的右下角找到它们。

## 节点和图形

右键点击网格，可以插入新节点。

从弹出菜单中，你还可以复制、剪切、粘贴或删除选中的节点。
> 常用键盘[快捷键](./shortcuts)也适用于这些操作。

> 在图形节点上右键点击不会选择或取消选择它们。
> 它被视为对网格的普通右键点击。

你可以通过连接节点的插槽（节点两侧的小圆圈）来更改节点的播放/执行顺序。

> 节点在网格上的视觉位置对其执行顺序没有影响。

**快速节点插入**

将连接（传入或传出）创建到网格上的空白处，
然后从打开的弹出窗口中，插入你想要的节点类型（双击或按回车）。
> 这仅在相应的*快速偏好设置*激活时有效（默认）。

## 节点检查

要更改节点的行为及其参数，
你可以通过以下方式在*检查器*面板的*节点*选项卡中打开节点：

+ 双击任意节点，
+ 或者如果*自动检查*（来自[快速偏好设置](#偏好设置)）激活，则只需选择一个即可。

可以修改的参数取决于节点的类型；
不过有一些通用属性：

+ 名称：每个节点的唯一文本标识符
  > 如果未更改，此参数反映节点的底层不可变整数 UID，
  > 但它是独立的且可编辑。通常，该值在每个章节中保持唯一。
+ 注释：你可以添加到任何节点的任意元数据
  > 例如，WIP、TODO 等标记，或开发者注释。
+ 跳过：在播放时停用节点（而不删除它）
  > 每种跳过的节点类型的行为取决于其实现。

节点*必须被更新*才能保留更改，
否则当你检查另一个节点时，更改将丢失。

当快速偏好设置*自动节点更新*激活时（默认），
检查的节点在用户离开节点时会自动更新，
换句话说，当检查另一个节点或取消选择当前节点时。
> 如果相应的快速偏好设置已启用（默认），重新检查节点将把其参数重置为内存中保存的最新状态，
> 并且不会触发自动更新。

更新节点会在内存中更改它们。
要永久存储它们，请*保存*文档。

## 变量和角色

某些节点类型，如 [User-Input](../nodes/user-input) 或 [Dialog](../nodes/dialog)，
需要[变量](./variables-logic)或[角色](./characters)才能正常工作。

要创建它们，请转到*检查器*面板中的相应选项卡。
> 你可能需要使用选项卡栏右上角的箭头按钮
> 来显示其他选项卡，或使用面板标题栏上的选择器按钮。

> **注意！**
> 自动更新仅适用于节点。对于其他资源，
> 你需要使用 `设置` 按钮来应用编辑的参数。

要在文本节点（如 [Dialog](../nodes/dialog)、[Interaction](../nodes/interaction)、[Content](../nodes/content) 等）中
显示变量或角色标签的值，
请使用类似 `{variable_name}` 或 `{CharacterName.tag-key}` 的 mustache 占位符。
Arrow 控制台和兼容的运行时将用它们各自的当前值替换它们。

## 更改历史

早期版本的 Arrow 仅支持*快照*，即打开文档的完整镜像，
作为用户可以创建和恢复的手动编辑历史点。

可以从*检查器*面板的*项目*选项卡
对文档或另一个快照的快照进行
拍摄、预览或恢复到主工作草稿。

快照可以在预览模式下编辑，但更改是*易失的*，
除非通过对编辑过的快照再次拍摄快照来存储。
> 你可以在预览模式下通过 `检查器 > 项目 > 导出` 将快照导出或保存为*副本*。

后来实现了第二个便利功能*本地/每节点修改历史*，
用于单独跟踪每个节点的编辑。

从 `v2` 开始，添加了另一个功能*历史系统*，
通过在内存中的牌组中保存一组快照，
提供更快、更便捷的撤销/重做修订。
> 可以使用键盘[快捷键](./shortcuts)和顶部栏上的两个按钮进行历史轮换。

此功能是实验性的，仍然使用类似于快照的完整文档镜像，
当文档大小相当大时，可能会给配置明显较低的设备带来负担。
这就是为什么历史大小偏好默认为零的原因。
任何更高的值都将自动激活历史系统。

> 快速提示：
> 保存和[导出](#导出)功能始终保存当前加载在编辑器中的内容，
> 无论是主工作草稿、预览的快照还是撤销历史点！
> 换句话说，你可以撤销更改或预览快照，
> 然后 `保存副本` 并导出，然后重做或关闭预览并继续，
> 不会丢失任何数据。

上述功能独立工作。

## 测试播放（控制台）

你可以使用*控制台*面板测试播放你的作品，无需导出。

编辑器右上角有几个按钮可以打开控制台
并从特定起点开始播放。

> 控制台会保留在变量和角色标签中所做的更改，
> 直到它被清除。你还可以从 `控制台 > 设置 > 检查...` 手动修改它们。

在*控制台*中测试播放和操作数据
不会更改你的项目数据，只会更改控制台的内存本身，
所以请放心测试。

> 在控制台中节点的非交互部分上`双击`，
> 会使网格更改视图并聚焦到该节点。

## 导出 {#导出}

当项目打开时，你可以通过 `检查器 > 项目 > 导出` 导出它。

如前所述，这些功能保存当前加载在编辑器中的内容，
无论是主工作草稿、预览的快照还是撤销历史点。

Arrow 支持多种导出选项，包括 `.json`、`.html` 和 `.csv`。

+ **`.html`** 导出将生成一个单文件的*可播放*文档，
使用[官方 HTML-JS 运行时][runtime-html-js]模板。
生成的文档可以在任何现代 Web 浏览器中播放。

+ **`.json`** 也是一种非常流行的格式，你可以在许多编程语言和游戏引擎中使用，
以进一步开发你的叙事和/或将其用作游戏内容的数据库。

  > 与完整的 `.arrow` 保存文件（也是 JSON 格式）相比，
  > 导出的文件可能会删除元数据和注释（出于隐私或简洁原因）。
  > 这使得它们不太适合在没有手动修改的情况下重新导入。

+ **`.csv`** 导出主要用于帮助项目的国际化。

  CSV 文件可以在电子表格编辑器中编辑，用原始导出值的翻译版本进行扩展，
  然后导入到游戏的翻译系统中，以获取节点文本内容的正确本地化版本。

  格式为 **CSV，使用制表符（`\t`）作为列分隔符，双引号（`"`）作为字符串分隔符**。
  在导入文件（例如在 Godot 引擎的翻译服务器中）
  或编辑它们（例如在 LibreOffice Calc 中打开）时，请相应配置你的工作流程。

  第一列始终保存指向数据的"key"指针，第二列保存相应的"原始"值。
  键的格式类似于 `NodeUID-NodeType-Parameter[-Index]`，例如 `1234-entry-plaque` 或 `5678-dialog-line-0`。

  > 你可能想要将"原始"值列的标题更改为你原始文本的语言（例如"En"），
  > 以避免在导入到 Godot 游戏时编译额外的翻译文件。

  从 Arrow 的桌面版本（而非 PWA 版本）导出时，覆盖文件会尝试为所有原始值仍然相同的行保留你添加的翻译列。
  换句话说，更新文件而不是覆盖它。
  删除的节点始终会被丢弃，结果按键的字母顺序排序。

  > **注意！**
  > 此功能相对粗糙且较新，因此请格外小心使用，并始终保留项目的备份。

## 杂项说明

+ 要调整或移动浮动面板：

  + 抓住面板的右上角可以调整其大小
  + 抓住面板的标题栏可以移动它
  > 当面板重叠时，抓住任何面板的标题栏将把它
  > 带到其他面板上方的顶层。

+ 除了老的 Arrow 小地图（显示在左下角）之外，
可以使用与其他网格控件分组在左上角的网状按钮
激活更大的小地图（后来添加到 Godot）。

[runtime-html-js]: https://github.com/mhgolkar/Arrow/tree/main/runtimes/html-js
