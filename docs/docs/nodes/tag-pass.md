---
sidebar_position: 17
---

# 标签通过节点 (Tag-Pass)

*Tag-Pass*（标签通过）节点被设计为二元门控。

它们将播放时内存（控制台或运行时）中[角色](../getting-started/characters)当前的标签集合与节点数据中定义的另一组标签（标准）进行比较。

有以下比较方法：

+ **Any（任一/OR）**：如果至少一个标签匹配，它会短路并正向通过。
+ **All（全部/AND）**：所有标签都必须匹配，节点才能正向通过。

为了认为角色的标签与标准中的标签匹配，节点首先检查标准键是否存在于角色当前的标签中。如果键完全相同（区分大小写），则检查值是否相同，无论是否为空。

请注意，我们可以将任何标准标签设置为仅键检查。在这种情况下，任何值都会通过该特定标准标签。

### 约定

+ Tag-Pass 是自动节点：它不等待用户交互。

+ 按照约定，被跳过的 Tag-Pass 节点会首先尝试播放其 `False` 槽。如果该槽没有出站连接，则播放 `True` 槽。

+ 遵循角色检查器，标签键和值应为字符串；但只有值可以为空。

### 使用

Tag-Pass 节点通常与 [Tag-Edit](./tag-edit) 节点一起用于事件管理。

想象您正在使用 Arrow 开发一款冒险游戏。在许多场景中，角色谈论他们的个人经历。您希望使所有对话准确且有意义，因此您需要您的角色记住他们已经互相说过的话，并在之前聊天的基础上建立理解。您为游戏计划的一个有趣的事情是允许不同的对话根据玩家之前的 [Dialog](./dialog) 行选择来形成和重新形成。换句话说，如果角色谈论某个特定的个人事实，该知识应该改变他们未来的讨论。在这个项目中，当讨论任何个人事实时，我们可以设置不同的标签；然后稍后检查它们，以便将玩家导航到对话双方都知道该事实的适当分支。

例如，我们有一个场景，角色 X 问为什么角色 Y 看起来如此暴躁！  
Y 可能会透露他最近失去了一个亲人，或者只是假装没有问题。  
如果我们的玩家决定让 Y 敞开心扉，我们可以在这里为角色设置这个标签：`lost_companion`（任意或空值）。  
如果 Y 没有忽略这个事实，X 会询问更多细节："家人吗？"  
现在我们通过可玩的 Dialog 节点向玩家呈现两个选择：1. "我的狗。他就是家人。"，2. "其实是朋友。"  
根据玩家的选择，我们可以将该标签更新为 `lost_companion: pet`。  
对话继续，我们可能会了解双方更多。  
如果 Y 愿意谈论，我们也可能引导玩家决定新的 `lost_pet_name` 标签的值。  
几个场景后，他们一起走着，遇到一个孩子正在为他新生的小狗寻找庇护所。  
Y 停下来，默默地盯着可爱的小狗。  
在这里，我们可以检查标签并分支到不同的可能对话。  
如果 `lost_companion: pet` 和 `lost_pet_name: Chucky` 都设置了（全部），我们可以通过到包含这一行的 Dialog 节点："这些小家伙中有任何一个可能是 \{Y.lost_pet_name\} 的后代吗？"；否则进入另一个分支，如果我们至少设置了 `lost_companion: pet`，则使用 Dialog 行："亲爱的，你的狗叫什么名字？"  
如果这些标签都没有设置，我们可能有一个完全不同的场景。

> 当然，您可以使用[变量](../getting-started/variables-logic)配合[变量更新 (Variable-Update)](./variable-update)和几个[条件 (Condition)](./condition)节点来实现类似的结果，但具有不同的人体工程学。两种方式都有各自的优缺点。这完全是您的选择，使用任何您认为适合您工作流程的方法。

> 快速提示！  
> 如果您打算一次又一次地检查事件，使用复杂的非二元逻辑，请考虑创建宏并利用 [Macro-Use](./macro-use) 节点和/或具有多个模式的 [Tag-Match](./tag-match)。

> 查看[角色](../getting-started/characters)文档，了解更多关于标签及其其他令人兴奋的用途的信息。

### 另请参阅

+ [导航和剧情管理](../getting-started/navigation-plot)
+ [角色](../getting-started/characters)
    > 了解更多标签魔法。
+ [变量](../getting-started/variables-logic)、[变量更新 (Variable-Update)](./variable-update) 和 [条件 (Condition)](./condition)
    > 游戏状态和事件管理的另一种替代方案。
+ [标签编辑 (Tag-Edit)](./tag-edit)
    > 动态创建、删除或操作标签。
+ [标签匹配 (Tag-Match)](./tag-match)
    > 创建非二元事件门控，类似于 switch 语句。
